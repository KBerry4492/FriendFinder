<!DOCTYPE html>
<html lang="en">
<head>

	<meta charset="UTF-8">
	<title>Friend Finder</title>

	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
	<script src="https://code.jquery.com/jquery.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

</head>
<body>

 <div class="container">

	<div class="jumbotron">
	  <h1 class="text-center"><span class="glyphicon glyphicon-fire"></span> 'Friend' Finder <span class="glyphicon glyphicon-fire"></h1>
	  <hr>
	  <h2 class="text-center">Find your own hot date tonight!</h2>
	  <br>

	  <div class="text-center">
	    
	    <a href="/home"><button type="button" class="btn btn-sm btn-primary"><span class="glyphicon glyphicon-home"></span> Go back to Home.</button></a>
	    
	  </div>
	</div>

 <div class="row">
      <div class="col-lg-12">

        <!-- Reservation Page -->
        <div class="panel panel-default">
          <div class="panel-heading">
            <h4 class="panel-title">Friend Matching Survey</h4>
          </div>
          <div class="panel-body">

            <form role="form">

              <div class="form-group">
                <label for="friend-name">Name (Required) </label>
                <input type="text" class="form-control" id="friend-name">
              </div>
              <div class="form-group">
                <label for="friend-photo">Link to Photo (Required) </label>
                <input type="text" class="form-control" id="friend-photo">
              </div>

              <hr>

              <div id=qDiv>

              	<h3>Question 1</h3>
				<h4>You enjoy writing code</h4>
			 	<select data-placeholder="" class="chosen-select" id="q1">
			 		<option value=""></option>
		            <option value="1">1 (Strongly Disagree)</option>
		            <option value="2">2</option>
		            <option value="3">3</option>
		            <option value="4">4</option>
		            <option value="5">5 (Strongly Agree)</option>
		      	</select>

		      	<h3>Question 2</h3>
				<h4>You make friends easily.</h4>
			 	<select data-placeholder="" class="chosen-select" id="q2">
			 		<option value=""></option>
		            <option value="1">1 (Strongly Disagree)</option>
		            <option value="2">2</option>
		            <option value="3">3</option>
		            <option value="4">4</option>
		            <option value="5">5 (Strongly Agree)</option>
		      	</select>

		      	<h3>Question 3</h3>
				<h4>You believe in the importance of art.</h4>
			 	<select data-placeholder="" class="chosen-select" id="q3">
			 		<option value=""></option>
		            <option value="1">1 (Strongly Disagree)</option>
		            <option value="2">2</option>
		            <option value="3">3</option>
		            <option value="4">4</option>
		            <option value="5">5 (Strongly Agree)</option>
		      	</select>

		      	<h3>Question 4</h3>
				<h4>You love large parties.</h4>
			 	<select data-placeholder="" class="chosen-select" id="q4">
			 		<option value=""></option>
		            <option value="1">1 (Strongly Disagree)</option>
		            <option value="2">2</option>
		            <option value="3">3</option>
		            <option value="4">4</option>
		            <option value="5">5 (Strongly Agree)</option>
		      	</select>

		      	<h3>Question 5</h3>
				<h4>you like to solve complex problems.</h4>
			 	<select data-placeholder="" class="chosen-select" id="q5">
			 		<option value=""></option>
		            <option value="1">1 (Strongly Disagree)</option>
		            <option value="2">2</option>
		            <option value="3">3</option>
		            <option value="4">4</option>
		            <option value="5">5 (Strongly Agree)</option>
		      	</select>

		      	<h3>Question 6</h3>
				<h4>You perfer variety to routine</h4>
			 	<select data-placeholder="" class="chosen-select" id="q6">
			 		<option value=""></option>
		            <option value="1">1 (Strongly Disagree)</option>
		            <option value="2">2</option>
		            <option value="3">3</option>
		            <option value="4">4</option>
		            <option value="5">5 (Strongly Agree)</option>
		      	</select>

		      	<h3>Question 7</h3>
				<h4>Your mind is always buzzing with ideas.</h4>
			 	<select data-placeholder="" class="chosen-select" id="q7">
			 		<option value=""></option>
		            <option value="1">1 (Strongly Disagree)</option>
		            <option value="2">2</option>
		            <option value="3">3</option>
		            <option value="4">4</option>
		            <option value="5">5 (Strongly Agree)</option>
		      	</select>

		      	<h3>Question 8</h3>
				<h4>You experience emotions intensely.</h4>
			 	<select data-placeholder="" class="chosen-select" id="q8">
			 		<option value=""></option>
		            <option value="1">1 (Strongly Disagree)</option>
		            <option value="2">2</option>
		            <option value="3">3</option>
		            <option value="4">4</option>
		            <option value="5">5 (Strongly Agree)</option>
		      	</select>

		      	<h3>Question 9</h3>
				<h4>You got straight for the goal.</h4>
			 	<select data-placeholder="" class="chosen-select" id="q9">
			 		<option value=""></option>
		            <option value="1">1 (Strongly Disagree)</option>
		            <option value="2">2</option>
		            <option value="3">3</option>
		            <option value="4">4</option>
		            <option value="5">5 (Strongly Agree)</option>
		      	</select>

		      	<h3>Question 10</h3>
				<h4>You try to make people feel welcome.</h4>
			 	<select data-placeholder="" class="chosen-select" id="q10">
			 		<option value=""></option>
		            <option value="1">1 (Strongly Disagree)</option>
		            <option value="2">2</option>
		            <option value="3">3</option>
		            <option value="4">4</option>
		            <option value="5">5 (Strongly Agree)</option>
		      	</select>

		      	</div>
		      	<!-- end of qdiv -->

				<br>
				<br>
				<button type="submit" class="btn btn-primary btn-lg btn-block" id="submit">Submit</button>
            </form>
          </div>
        </div>

      </div>
    </div>


	<footer class="footer">
	<a href="/api/friends" target="_blank">Friends list.</a>
	&nbsp
	<a href="https://github.com/KBerry4492/FriendFinder" target="_blank">Github Page.</a>
	</footer>

	<!-- Modal -->
	<div id="resultsModal" class="modal fade" role="dialog">
	  <div class="modal-dialog">

	    <!-- Modal content-->
	    <div class="modal-content">
	      <div class="modal-header">
	        <button type="button" class="close" data-dismiss="modal">&times;</button>
	        <h2 class="modal-title"><strong>Best Match</strong></h2>
	      </div>
	      <div class="modal-body">
	        <h2 id="matchName"></h2>
	        <img id="matchImg" style="width: 100%;" src="https://openclipart.org/download/240431/Man-Head-Silhouette.svg" alt="Null Face Error">
	      </div>
	      <div class="modal-footer">
	        <button type="button" id="modeOff" class="btn btn-default" data-dismiss="modal">Close</button>
	      </div>
	    </div>

</div>
</body>
</html>


<script type="text/javascript">

    $("#submit").on("click", function(event) {

      event.preventDefault();

      //Grab the form values

      var friName = $("#friend-name").val().trim();
      var friPhoto = $("#friend-photo").val().trim();
      var scoresArray = [$("#q1").val(), $("#q2").val(), $("#q3").val(), $("#q4").val(), $("#q5").val(), $("#q6").val(), $("#q7").val(), $("#q8").val(), $("#q9").val(), $("#q10").val(), ];

      console.log("SA: "+scoresArray);

      var scoreString = scoresArray.join("");
      //turn them into a string
      console.log ("ScoreString: "+scoreString);

      //If any of the fields are empty, do not continue.

    	if (scoreString.length < 10 || friName === "" || friPhoto === "") {
      		alert("Please fill out all fields!");
    	}

    	else{
	      var newFriend = {
	        name: friName,
	        photo: friPhoto,
	        scores: scoreString
	      };

	      console.log("newFriend: "+ JSON.stringify(newFriend, null, 2));

	      var currentURL = window.location.origin;

	      $.post(currentURL + "/api/newfriend", newFriend,
	        function(data) {

	        	console.log("Data Return: "+ data);

	        	$("#matchName").text(data.name);
	    		$('#matchImg').attr("src", data.photo);
		    	$("#resultsModal").modal('toggle');
	        });
		}
      
    });

    $(document).on("click", "#modeOff", function(event) {
      	window.location = "/survey"
      }
</script>